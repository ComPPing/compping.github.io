<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://compping.github.io/blog</id>
    <title>ppingpong Blog</title>
    <updated>2023-11-04T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://compping.github.io/blog"/>
    <subtitle>ppingpong Blog</subtitle>
    <icon>https://compping.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Oauth2 흐름(카카오, 구글)]]></title>
        <id>https://compping.github.io/blog/2023/11/04/oauth2-kakao-google</id>
        <link href="https://compping.github.io/blog/2023/11/04/oauth2-kakao-google"/>
        <updated>2023-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[이번 프로젝트에서 로그인을 소셜로그인을 선택했고, 깨달은점이 많아 정리 해보려고합니다.]]></summary>
        <content type="html"><![CDATA[<p>이번 프로젝트에서 로그인을 소셜로그인을 선택했고, 깨달은점이 많아 정리 해보려고합니다.</p><h1>카카오</h1><p><img loading="lazy" src="/assets/images/Untitled-0fb49b060b65472b25d7d57dae46bbe4.png" width="1600" height="2124" class="img_ev3q"></p><p>다음은 카카오 공식문서에서 제공하는 로그인 api 흐름입니다. 본인은 자바 스프링을 사용해서, 스프링이 제공하는 시큐리티의 기능을 이용하면 위의 일련의 과정들을 몰라도 구현가능했는데, 이번에 프론트와 협업할 기회가 생기면서 각 과정들을 자세히 이해할 필요성을 느꼈으며,   그렇기에 위 흐름을 하나하나 따라가고자 합니다.</p><p><img loading="lazy" src="/assets/images/Untitled1-88541b7eb885433e10a9ee9e2734ca9c.png" width="773" height="412" class="img_ev3q"></p><p><strong>Step 1</strong> 은 auth Server에서 무엇을 받을지(이름, 이메일, 프로필 등..)를 동의(인가) 받는 과정입니다.</p><p><img loading="lazy" src="data:image/png;base64,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" width="682" height="130" class="img_ev3q"></p><p>설정해둔 {REDIRECT URI}?code="" 에 인가코드가 담겨옵니다.</p><p><strong>Step 2</strong> 에서 이 인가코드를 바디에 담아 post로 요청을 보내야합니다.</p><p>여기서 선택지가 생겼습니다.</p><ol><li><strong>로그인버튼(백엔드로 바로 요청), REDIRECT URI 를 백엔드에 설정, 시큐리티를 사용.</strong></li><li><strong>로그인버튼(백엔드로 바로 요청), REDIRECT URI 를 백엔드에 설정, 시큐리티 사용 x</strong></li><li><strong>로그인버튼(카카오로 요청해 인가코드 받음) REDIRECT URI 를 프론트에 설정, 시큐리티 사용 x</strong></li></ol><p>구글링을 하다보면 사람들마다 구현한 방식들이 조금씩 달랐는데, 위 선택지 때문에 생긴것임을 깨달았습니다. </p><p>앞에서 언급한대로, 시큐리티는 사용하지 않을것이므로 1번방법은 제외. REDIRECT URI를 어디다 둘 것인지 정해야합니다. 우리는 프론트와 일을 나누어서 할 생각으로 3번을 선택했습니다.</p><p>구현을 하다보니, 2번방법이 올바른 방법임을 깨달았습니다. 스스로 확신하는 이유는 결국 코드가 잘 동작하는지 테스트 해보려면 백엔드에서 직접받아볼 수 밖에 없기 때문입니다.</p><p><img loading="lazy" src="/assets/images/Untitled3-9059596c30aa2c6f2ce64e357e18a3eb.png" width="458" height="363" class="img_ev3q"></p><p>나중에 찾아보니 카카오 개발자분도 이 방법을 기본으로 생각하고 있는 모습을 볼 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현코드">구현코드<a href="#구현코드" class="hash-link" aria-label="구현코드에 대한 직접 링크" title="구현코드에 대한 직접 링크">​</a></h3><p><img loading="lazy" src="/assets/images/Untitled4-c9edee39def7d024d36bbda2c2103c28.png" width="901" height="292" class="img_ev3q"></p><p>명시한 REDIRECT URI로 인가코드를 받아주는 컨트롤러입니다.</p><p><img loading="lazy" src="/assets/images/Untitled5-dd2553510392855372b8faa680f7cb10.png" width="631" height="322" class="img_ev3q"></p><p>인가코드를 바탕으로 토큰을 생성합니다. 이 토큰을 가지고 사용자 정보를 요청합니다.</p><p><img loading="lazy" src="/assets/images/Untitled6-9fb9969eea3cbc5110a6df1681086e8d.png" width="1011" height="406" class="img_ev3q"></p><p>실제 요청하는 부분이다. API 문서에서 필요한 헤더와 바디를 구성하고 실제로 요청하는 부분입니다.</p><h1>구글</h1><p>솔직히 말씀드리면, 구글 API 문서는 난해하고 복잡합니다.  실제로 구글링을 해보면 위 처럼 일련의 과정들을 따라가면서 구현해본 코드가 거의 없습니다. (대부분 시큐리티 사용) 추가로 구글은 사용자 정보를 추가로 얻으려면 People API 라는 다른 API를 사용해야합니다. </p><p>이것마저도 공식문서가 여러군대에 숨겨져 있어 프론트분과 힘들게 찾았습니다. People API를 사용하는 예제는 찾아볼 수 없었지만, 할 수 있습니다. 카카오 로그인을 구현하면서 과정들을 확실히 이해했기 때문입니다.</p><p><img loading="lazy" src="/assets/images/Untitled8-3934990cbc8972d5b2c64068f7aa1f7e.png" width="547" height="408" class="img_ev3q"></p><p>People API 사용을 추가하니, 기존에 email과 profile의 접근 범위가 바뀌었습니다. 기존 코드도 수정해야하나 궁금해서 그대로 나두고 실험해보니 기존꺼로도 정상적으로 동작합니다. (범위가 userInfo로 시작하면 default값으로 처리되는지 추측합니다)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현코드-1">구현코드<a href="#구현코드-1" class="hash-link" aria-label="구현코드에 대한 직접 링크" title="구현코드에 대한 직접 링크">​</a></h3><p><img loading="lazy" src="/assets/images/Untitled9-7640df62f4b7d1619290730b5ee110d2.png" width="773" height="304" class="img_ev3q"></p><p>카카오와 다른점은 액세스 토큰 요청 시, clientSecret값을 필수로 보내줘야하는 점입니다.</p><p><img loading="lazy" src="/assets/images/Untitled10-17263ae1d32d3656fb1c49a9b2814d7a.png" width="773" height="274" class="img_ev3q"></p><p><strong><a href="https://developers.google.com/identity/protocols/oauth2/web-server?hl=ko#exchange-authorization-code" target="_blank" rel="noopener noreferrer">https://developers.google.com/identity/protocols/oauth2/web-server?hl=ko#exchange-authorization-code</a></strong></p><p>(인가코드 요청하는 엔드포인트를 찾았습니다.)</p><p>카카오와 비슷한 부분의 코드는 스킵하고 관련 공식 문서 링크만 추가하겠습니다.</p><p><img loading="lazy" src="/assets/images/Untitled11-c72ac75c6964f5c35aee7d65bdf5c1dc.png" width="773" height="477" class="img_ev3q"></p><p><a href="https://developers.google.com/identity/protocols/oauth2/web-server?hl=ko#exchange-authorization-code" target="_blank" rel="noopener noreferrer">https://developers.google.com/identity/protocols/oauth2/web-server?hl=ko#exchange-authorization-code</a></p><p>카카오와 다른점은 쿼리파라미터로도 액세스토큰을 넘길 수 있다는 점입니다.</p><p><img loading="lazy" src="/assets/images/Untitled12-353774300051a531d4d5252c57b22abc.png" width="773" height="439" class="img_ev3q"></p><p><a href="https://developers.google.com/identity/openid-connect/openid-connect?hl=ko#obtaininguserprofileinformation" target="_blank" rel="noopener noreferrer">https://developers.google.com/identity/openid-connect/openid-connect?hl=ko#obtaininguserprofileinformation</a></p><p><img loading="lazy" src="/assets/images/Untitled13-f9b21fb0e3b9de201442352b73b19b8b.png" width="1257" height="390" class="img_ev3q"></p><p>/tokenInfo가 사용자 정보를 요청하는 엔드포인트고 추가정보를 얻기 위해서는 위에 표시해둔 엔드포인트로 요청을 보내야합니다. 그런데, account_id를 추가로 전달해야하는데 이에대한 정보가 적혀있지 않았습니다.</p><p><img loading="lazy" src="/assets/images/Untitled14-5aa79d67e338bb0eebdca46278efbbc8.png" width="773" height="450" class="img_ev3q"></p><p><a href="https://developers.google.com/people/api/rest/v1/people/get?hl=ko&amp;apix_params=%7B%22resourceName%22%3A%22people%2Fme%22%2C%22personFields%22%3A%22genders%2Cbirthdays%22%7D" target="_blank" rel="noopener noreferrer">https://developers.google.com/people/api/rest/v1/people/get?hl=ko&amp;apix_params=%7B%22resourceName%22%3A%22people%2Fme%22%2C%22personFields%22%3A%22genders%2Cbirthdays%22%7D</a></p><p>오른쪽에 people api를 요청해볼 수 있는 예제가 있었습니다. 실제로 날려서 accountId값을 확인해보았는데, 로그인 api에서 받은 sub값과 동일했습니다. sub값을 추출하고 전달하는 형태로 로그인 api와 people api 를 합쳐 구현하는데에 성공했습니다.</p><p>로그인 기능이 단순해 보일 수는 있어도, 구현방법에 따라, 접근하는 수준에 따라 난이도가 천차만별로 변경될 수 있다는 걸 알게되었습니다.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Conversational Recommender System - Dialogue Management]]></title>
        <id>https://compping.github.io/blog/conversational-recsys-dialogue-management</id>
        <link href="https://compping.github.io/blog/conversational-recsys-dialogue-management"/>
        <updated>2023-10-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[이 포스트에서는 대화형 추천 시스템 (conversational recommender system)에서 핵심적인 요소인 dialogue management에 대해 다룹니다.]]></summary>
        <content type="html"><![CDATA[<p>이 포스트에서는 대화형 추천 시스템 (conversational recommender system)에서 핵심적인 요소인 dialogue management에 대해 다룹니다.</p><p>추천 시스템과 유저는 서로 상호작용을 주고받는 interactive한 프로세스입니다. 특히, 대화형 추천 시스템에서는 <strong>서로 대화를 주고받습니다</strong>. 추천 시스템이 유저에게 추천 아이템을 제공할지, 추가 정보를 요구할지, 그 외 잡담을 나눌 지 등 추천 시스템이 유저와 상호작용하는 수단인 대화를 제어하는 것을 <strong>dialogue management</strong> (DM)라고 부릅니다.</p><p>설령, 대화형 추천 시스템일지라도 유저는 마치 검색하듯이 단순히 간단한 질문만으로도 즉각적인 추천 아이템을 얻고 싶을 수 있고, multi-turn 대화를 통해 구체적인 특징을 만족하는 아이템을 얻고 싶을 수 있습니다. 그러나 아이템을 추천받기 위해 대화가 너무 길어지면 유저는 피로감을 느끼겠죠. 또한, 추천된 아이템에 대해 의논하거나 단순 잡담을 시도할 수도 있습니다. 이처럼 대화라는 것은 대단히 복잡한 과정입니다. 따라서 이를 별도로 처리할 필요가 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dialogue-management-based-on-reinforcement-learning">Dialogue Management based on Reinforcement Learning<a href="#dialogue-management-based-on-reinforcement-learning" class="hash-link" aria-label="Dialogue Management based on Reinforcement Learning에 대한 직접 링크" title="Dialogue Management based on Reinforcement Learning에 대한 직접 링크">​</a></h2><p>대화란 것은 보통 여러 번 수행되며 추천 시스템은 유저의 만족도를 높여야합니다. 그렇기 때문에 dialogue management는 <strong>연속적인 의사결정 문제</strong> (sequential decision making problem)입니다. 강화학습 (reinforcement learning, RL)은 연속적인 의사결정 문제를 최적화할 수 있습니다. 따라서, 강화학습으로 어떻게 이 문제를 해결할 수 있을 지 알아봅시다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="markov-decision-process">Markov Decision Process<a href="#markov-decision-process" class="hash-link" aria-label="Markov Decision Process에 대한 직접 링크" title="Markov Decision Process에 대한 직접 링크">​</a></h3><p>강화학습을 적용하기 위해서는 markov decision process (MDP)를 정의해야합니다:</p><ul><li>State: 대화 context, 유저 features, 아이템 features, ...</li><li>Action: 추천, 정보 요청, ...</li><li>Reward: 추천 아이템에 대한 feedback (e.g., click-through-rate (CTR), 좋아요, 평점), 유저 query로부터의 긍정/부정 반응, multi-turn 대화로 인한 피로감, 대화 중단, ...</li></ul><p>state는 추천 시스템이 action을 결정하기 위해 관찰할 정보들, reward는 유저의 만족도와 관련된 scalar 값입니다. </p><p>강화학습은 state가 주어졌을 때 action을 결정하는 <strong>policy</strong>를 학습합니다. 이 때 feedback으로 reward가 매 time step (i.e., 매 대화 turn)마다 제공되며, 즉각적인 reward가 아닌 <strong>cumulative reward를 maximize</strong>하도록 학습합니다. 학습을 통해 추천 시스템은 유저 utterance의 의도를 이해하게 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="restaurant-recommendation-example">Restaurant Recommendation Example<a href="#restaurant-recommendation-example" class="hash-link" aria-label="Restaurant Recommendation Example에 대한 직접 링크" title="Restaurant Recommendation Example에 대한 직접 링크">​</a></h2><p>아래는 강화학습을 통해 음식점 추천에 대한 dialogue management를 다룬 실제 예시입니다:</p><p><img loading="lazy" src="/assets/images/dialogue-example-47427586ca11bcca6006be6347ad04c2.png" width="1194" height="1108" class="img_ev3q"></p><p>여기서는 비교적 단순하게 모델링했습니다. 추천 시스템이 능동적인 대화를 하기보다는, 단순히 유저의 query에 대해 추천을 제공하거나 부족한 정보를 요청하기만 하는 비교적 수동적인 시스템입니다. 그러나, 이 예시는 강화학습을 통해 dialogue management를 어떻게 다룰 수 있는지를 보여줍니다. 아래는 강화학습을 적용했을 때와 rule-based 모델을 사용했을 때의 유저의 만족도 차이입니다:</p><p><img loading="lazy" src="/assets/images/comparison-table-f707796a91b61fbefd77ebf2a060461f.png" width="1198" height="640" class="img_ev3q"></p><p>MaxEnt는 rule-based 모델이고, CRM은 강화학습 기반 모델입니다. 여기서 중요한 수치는 R과 T입니다. R은 유저의 만족도를, T는 대화 turn을 나타냅니다. MaxEnt를 보면 대화 turn이 늘어날수록 만족도가 늘어남을 알 수 있습니다. 이는 정보를 많이 획득할 수록 더 정확한 추천을 제공할 수 있기 때문입니다. 그러나, MaxEnt Full과 CRM을 비교하면, CRM이 더 적은 대화 turn으로도 높은 만족도를 보여줍니다. 이는 강화학습을 통해 dialogue management를 효과적으로 다룰 수 있음을 보여줍니다. 즉, <strong>더 적은 대화 turn으로 유저의 피로감을 줄이면서 더 나은 추천을 제공</strong>할 수 있습니다.</p>]]></content>
        <author>
            <name>박진영</name>
            <uri>https://github.com/DevSlem</uri>
        </author>
        <category label="recsys" term="recsys"/>
        <category label="nlp" term="nlp"/>
        <category label="ai" term="ai"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Next13 + cloudflare + PWA를 이용한 초기세팅]]></title>
        <id>https://compping.github.io/blog/nextjs-init</id>
        <link href="https://compping.github.io/blog/nextjs-init"/>
        <updated>2023-09-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[교내에서 열린 대회에 참여하여 AI를 이용한 서비스를 기획/개발중에 있다. 이번 포스팅에서는 프로젝트 초기 세팅(+PWA)과 더불어 cloudflare를 이용해 배포하기까지의 과정을 기록할 예정이다.]]></summary>
        <content type="html"><![CDATA[<p>교내에서 열린 대회에 참여하여 AI를 이용한 서비스를 기획/개발중에 있다. 이번 포스팅에서는 프로젝트 초기 세팅(+<code>PWA</code>)과 더불어 cloudflare를 이용해 배포하기까지의 과정을 기록할 예정이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="우선-next-부터-설치">우선 Next 부터 설치<a href="#우선-next-부터-설치" class="hash-link" aria-label="우선 Next 부터 설치에 대한 직접 링크" title="우선 Next 부터 설치에 대한 직접 링크">​</a></h3><p>사실 Next 공식문서에 너무 잘 나와있어서 굳~이 글로 쓸 필요는 없을것 같다. </p><p><a href="https://nextjs.org/docs/getting-started/installation" target="_blank" rel="noopener noreferrer">Getting Started: Installation</a></p><p>기본 세팅에서는 패키지 매니저가 <code>npm</code>으로 되어 있는데 나는 <code>package-lock.json</code>을 지우고 <code>pnpm</code>으로 설치해줬다. 물론 몇명이서 하는 프로젝트이다 보니 크기가 작아 스펙타클한 효능(?)을 못느끼겠지만 그래도 2~3초 정도 빠르다는 점에서 굳이 안바꿀 이유는 없었다. <code>yarn</code>은 업데이트가 안되고 있다고 해서 안쓰려고 하는 중이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloudflare에-배포">cloudflare에 배포<a href="#cloudflare에-배포" class="hash-link" aria-label="cloudflare에 배포에 대한 직접 링크" title="cloudflare에 배포에 대한 직접 링크">​</a></h3><p>나는 우선 배포부터 하고 보는 스타일이여서 이걸 두번째 단계로 넣었다.</p><p><strong>1. <code>next.config.js</code>에 있는 output 추가 (static site로 배포할 경우)</strong></p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nextConfig </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'export'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위처럼 코드를 수정한 후 pnpm build를 하면 아래 사진처럼 out 폴더에 정적 html이 생성됨을 확인할 수 있다.</p><p><img loading="lazy" alt="1" src="/assets/images/1-fabe9c2798d9c6f364cbb357a69e0aad.png" width="438" height="228" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>원래 예전에는 package.json에서 script도 변경해줬어야 했는데(next build &amp;&amp; next export) Next13에서는 변경된듯 하다.</div><div class="admonitionContent_S0QG"></div></div><p><img loading="lazy" alt="2" src="/assets/images/2-c1fa7da96b519e2aa7e10bd673729140.png" width="1326" height="452" class="img_ev3q"></p><p><strong>2. cloudflare 페이지로 이동</strong></p><p>회원가입 &amp; 로그인 후, Workers &amp; Pages 탭을 클릭</p><p><img loading="lazy" alt="3" src="/assets/images/3-f2b7ca12a187627c053dd00be3f75194.png" width="520" height="380" class="img_ev3q"></p><p><img loading="lazy" alt="4" src="/assets/images/4-b0be70e36eec3b75a27d9c19561a5c6c.png" width="2642" height="898" class="img_ev3q"></p><p>여기에 있는 Pages 탭에서 Connect to Git을 클릭</p><p><img loading="lazy" alt="5" src="/assets/images/5-20f4cd35638a08afd85d6531e02d53ff.png" width="2100" height="1382" class="img_ev3q"></p><p>github 연결 해주고 원하는 레포를 선택한다.</p><p><img loading="lazy" alt="6" src="/assets/images/6-ea5283201b7e85a2959d61169e30466a.png" width="946" height="622" class="img_ev3q"></p><p><img loading="lazy" alt="7" src="/assets/images/7-b807b5ad3bc6a6e576bfb559c7402a89.png" width="1286" height="820" class="img_ev3q"></p><p>위와 같이 정보를 입려해주면 끝! 아래와 같이 배포가 성공적으로 됐음을 확인할 수 있다.</p><p><img loading="lazy" alt="8" src="/assets/images/8-e3d048e691d5d65e3663de003307931e.png" width="1291" height="688" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pwa-적용">PWA 적용<a href="#pwa-적용" class="hash-link" aria-label="PWA 적용에 대한 직접 링크" title="PWA 적용에 대한 직접 링크">​</a></h3><p>우리 서비스는 사용자의 위치를 알고있어야 하기 때문에 PWA 기술을 사용해야한다.  우선 <code>next-pwa</code>를 설치해준다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> i next-pwa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그리고 next.config.js를 아래와 같이 수정한다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> withPWA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'next-pwa'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nextConfig </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">withPWA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">dest</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'public'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextConfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>필요한 favicon, icon은 src/app 하위에 넣어주었다.</p><p><img loading="lazy" alt="9" src="/assets/images/9-70bc3bc2ee23697ce950db83c75a18c2.png" width="158" height="179" class="img_ev3q"></p><p>manifest.ts를 아래와 같이 작성해준다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">MetadataRoute</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'next'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">manifest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">MetadataRoute</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Manifest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ppingpong'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">short_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ppingpong'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ppingpong'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">start_url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">display</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'standalone'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">background_color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'#fff'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">theme_color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'#FD8D32'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">icons</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">src</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/icon.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">sizes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'512x512'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">purpose</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"maskable"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">src</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/apple-icon.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">sizes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'512x512'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>gitignore</code>에 아래와 같은 코드를 추가해주었다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public/sw*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public/workbox-*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PWA가 제대로 설치되었다면 lighthouse 검사를 통해 아래와 같이 PWA에 초록색이 띄는걸 확인할 수 있다!</p><p><img loading="lazy" alt="10" src="/assets/images/10-7a6eb612e2e1725a2c72d50fdd16718e.png" width="785" height="175" class="img_ev3q"></p><p>또한 앱을 설치하면 위 사진처럼 크롬앱에서도 확인이 가능하다.</p><p><img loading="lazy" alt="11" src="/assets/images/11-735b26fa2bf8c35bafdb540c6d92d0b8.png" width="335" height="297" class="img_ev3q"></p><p><img loading="lazy" alt="앱으로 열었을 때 모습" src="/assets/images/12-429951222e132815536f663f28656aa2.png" width="2032" height="1167" class="img_ev3q"></p><p><em>앱으로 열었을 때 모습</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료">참고자료<a href="#참고자료" class="hash-link" aria-label="참고자료에 대한 직접 링크" title="참고자료에 대한 직접 링크">​</a></h3><p><a href="https://nextjs.org/docs/app/api-reference/file-conventions/metadata" target="_blank" rel="noopener noreferrer">Next.js 공식문서</a></p>]]></content>
        <author>
            <name>이하령</name>
            <uri>https://github.com/haryung-lee</uri>
        </author>
        <category label="frontend" term="frontend"/>
        <category label="nextjs" term="nextjs"/>
        <category label="pwa" term="pwa"/>
        <category label="cloudflare" term="cloudflare"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Conversational Recommender System Overall Processes]]></title>
        <id>https://compping.github.io/blog/conversational-recsys-overall-processes</id>
        <link href="https://compping.github.io/blog/conversational-recsys-overall-processes"/>
        <updated>2023-09-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[이 포스트에서는 대화형 추천 시스템 (conversational recommender system)을 구축하기 위한 전반적인 과정과, 유저의 utterance와 같은 텍스트 데이터를 어떻게 처리할 것인가에 대해 간략히 다룹니다.]]></summary>
        <content type="html"><![CDATA[<p>이 포스트에서는 대화형 추천 시스템 (conversational recommender system)을 구축하기 위한 전반적인 과정과, 유저의 utterance와 같은 텍스트 데이터를 어떻게 처리할 것인가에 대해 간략히 다룹니다.</p><p>유저의 utterance로부터 대화형 추천 시스템 구축은 자연어 처리 (natural language process), 추천 알고리즘, 유저 context에 대한 조합을 요구하는 복잡한 태스크입니다. 이를 step-by-step으로 알아봅시다:</p><ol><li><strong>Data Collection</strong>:<ul><li>이름, 위치, 타입 (e.g., bar, cafe, fine dining), 분위기 (e.g., quiet, lively), 음식 종류, 평점, 리뷰 등의 디테일한 정보를 포함하는 음식점 데이터셋을 모으는 걸로 시작합니다.</li><li>가능한, 유저의 선호도와 행동 데이터 (e.g., 이전에 방문한 음식점, 평점)를 모을 수 있으면 좋습니다.</li></ul></li><li><strong>Text Preprocessing</strong>:<ul><li>유저의 utterance을 처리하기 위해 NLP 기법을 사용합니다:<ul><li>Tokenization</li><li>Lowercasing</li><li>Removing stop words</li><li>Lemmatization or stemming</li></ul></li></ul></li><li><strong>Intent and Entity Recognition</strong>:<ul><li>utterance로부터 유저의 의도 (e.g., "find", "recommend", "search")를 추출합니다. 이때, intent recognition 모델을 사용합니다.</li><li>entity나 keyword (e.g., "quiet", "bar", "seafood")를 entity recognition이나 keyward extraction 기법을 사용해 추출합니다.</li></ul></li><li><strong>Contextual Understanding</strong>:<ul><li>시스템이 stateful하다면, 유저 context를 이해하기 위해 과거 상호작용들을 기억합니다. 이는 추천을 더 잘 정제할 수 있습니다. 예를 들어, 유저가 이전에 비건이라고 언급했다면, 고기집은 적절치 않은 추천입니다.</li><li>지역기반 서비스를 구축합니다. 유저가 특별히 다른 장소를 언급하지 않았다면, 유저 근처의 음식점 추천합니다.  </li></ul></li><li><strong>Candidate Generation</strong>:<ul><li>collaborative filtering이나 content-based filtering과 같은 전통적인 추천 알고리즘을 사용해 candidate list를 생성합니다.</li><li>추출된 entity를 바탕으로 이 리스트를 필터링합니다. 예를 들어, "quiet"와 "bar"가 entity라면, "quiet"한 attribute를 가진 bar만을 선택합니다.</li><li>유저의 행동 데이터가 있다면, 추천 리스트를 re-rank해 우선순위를 조정합니다. 예를 들어, 유저가 이탈리안 음식점을 자주 방문했다면, 이러한 음식점을 높은 우선순위에 둘 수 있습니다.</li></ul></li><li><strong>Hybrid Approach</strong>:<ul><li>추천 퀄리티를 높이기 위해 여러개의 추천 알고리즘을 결합할 수도 있습니다. 예를 들어, collaborative와 content-filtering을 결합하거나 딥러닝 기반 모델을 결합할 수 있습니다.</li></ul></li><li><strong>Feedback Loop</strong>:<ul><li>유저가 추천된 아이템들에 피드백을 제공하도록 합니다. explicit (e.g., ratings, likes)하거나 implicit (e.g., click-through rates, time spent)한 피드백들이 있습니다.</li><li>이러한 피드백을 사용해 지속적으로 추천 프로세스를 개선할 수 있습니다.</li></ul></li><li><strong>Post-Processing</strong>:<ul><li>유저에게 적절한 수의 추천 아이템을 제공합니다 (e.g., top 5 or top 10).</li><li>관련도, rating, 인기도와 같은 어떠한 metric을 사용해 추천된 아이템을 정렬합니다.</li></ul></li><li><strong>UI/UX Considerations</strong>:<ul><li>대화형 방식을 통해 context와 함께 추천 아이템을 제공합니다. 예를 들어, "근처 조용한 술집을 찾았어요:".</li><li>유저가 추천 시스템의 query를 조정하거나 추가 질문을 할 수 있게 합니다. 예를 들어, "이 중 실외석이 있는 곳이 있니?".</li></ul></li><li><strong>Evaluation and Continuous Learning</strong>:<ul><li>주기적으로 추천 시스템의 performance를 평가합니다. A/B testing과 같은 방법이 있습니다.</li><li>데이터와 피드백을 더 많이 수집하고, 추천 모델을 개선합니다.</li></ul></li></ol><p>이 중 텍스트 데이터를 처리하는 방법에 대해 집중적으로 다뤄보겠습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-extract-features-from-text-data">How to Extract Features from Text Data<a href="#how-to-extract-features-from-text-data" class="hash-link" aria-label="How to Extract Features from Text Data에 대한 직접 링크" title="How to Extract Features from Text Data에 대한 직접 링크">​</a></h2><p>유저의 utterance와 같은 텍스트 데이터로부터 추천 시스템에 사용할 feature를 추출할 때 크게 2가지 방법으로 처리할 수 있습니다: named entity recognition, keyword extraction. 두 방법은 비슷하면서도 다릅니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="named-entity-recognition">Named Entity Recognition<a href="#named-entity-recognition" class="hash-link" aria-label="Named Entity Recognition에 대한 직접 링크" title="Named Entity Recognition에 대한 직접 링크">​</a></h3><p>named entity recognition (NER)은 일종의 tagging 작업입니다. 어떤 텍스트로부터 <strong>entity를 사전에 정의된 카테고리로 분류</strong>하는 정보 추출 작업입니다. 카테고리 예시로 음식 타입, 분위기, 위치 등이 있습니다. NER 모델은 labeled data로부터 학습됩니다. 각 문장 내 단어는 상응하는 entity 타입으로 태그되어있습니다. entity는 유스케이스에 따라 다르게 정의됩니다. 아래 그림에서 entity로 'Name', 'Date', 'Designation', 'Subject"가 사전에 정의되어있는걸 확인할 수 있습니다.</p><p><img loading="lazy" src="/assets/images/named-entity-recognition-4bb3151e0e888cfe931292003690ca58.png" width="1920" height="650" class="img_ev3q"></p><p><strong>Usage in candidate generation:</strong></p><ul><li>음식점 추천 시스템 맥락에서, NER은 유저 uterrance로부터 특정 entity를 식별합니다. 예를 들어, "시카고 내 이탈리안 음식점을 원해"라는 문장에서, "이탈리안"은 '음식 타입', "시카고"는 '위치'로 인식됩니다.</li><li>candidate generation은 식별된 entity에 대응하는 음식점을 찾습니다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="keyword-extraction">Keyword Extraction<a href="#keyword-extraction" class="hash-link" aria-label="Keyword Extraction에 대한 직접 링크" title="Keyword Extraction에 대한 직접 링크">​</a></h3><p>keyward extraction은 거대한 텍스트 조각으로부터 관련된 용어를 식별 및 추출하는 작업입니다. 이는 entity가 사전에 정의되어있는가에 관계 없이 수행되며, 일종의 <strong>요약</strong>과 유사합니다.</p><p><strong>Usage in candidate generation:</strong></p><ul><li>"quiet", "rooftop", "seafood"와 같은 keyword를 유저의 utterance로부터 추출합니다.</li><li>이러한 keyword들은 음식점의 attribute, 태그, 리뷰 등과 매칭됩니다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="our-case">Our Case<a href="#our-case" class="hash-link" aria-label="Our Case에 대한 직접 링크" title="Our Case에 대한 직접 링크">​</a></h3><p>추천 시스템 구축에는 NER이 조금 더 적합하다고 판단됩니다. 그러나, NER은 labeled data로부터의 학습이 필요하기 때문에, 데이터셋을 별도로 구축하고 학습까지 해야하는 문제가 있습니다.</p><p>GPT는 자연어에 대해 충분히 이해하고 추론할 수 있는 능력을 가지고 있습니다. GPT를 활용한다면 NER 작업을 쉽게 할 수 있을 거라 판단됩니다:</p><ol><li>음식점에 대한 entity를 사전에 잘 정의.</li><li>GPT에게 entity를 추출해달라고 프롬프팅.</li><li>유저 utterance 또는 아이템 description 입력.</li><li>추출된 entity를 추천 모델에 입력.</li></ol><p>실제, 간이 테스트 결과 GPT-3.5, GPT-4 모두 훌륭한 결과를 내놓았습니다.</p>]]></content>
        <author>
            <name>박진영</name>
            <uri>https://github.com/DevSlem</uri>
        </author>
        <category label="recsys" term="recsys"/>
        <category label="nlp" term="nlp"/>
        <category label="ai" term="ai"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Recommdenr System RL Introduction]]></title>
        <id>https://compping.github.io/blog/recsys-rl-intro</id>
        <link href="https://compping.github.io/blog/recsys-rl-intro"/>
        <updated>2023-09-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[추천 시스템에 대해 더 자세히 이해하고 싶다면 아래 튜토리얼 코드를 참고하기 바랍니다.]]></summary>
        <content type="html"><![CDATA[<p>추천 시스템에 대해 더 자세히 이해하고 싶다면 아래 튜토리얼 코드를 참고하기 바랍니다.</p><blockquote><p>Tutorial Code: <a href="https://github.com/DevSlem/recommender-system-rl-tutorial" target="_blank" rel="noopener noreferrer">DevSlem/recommender-system-rl-tutorial (Github)</a></p></blockquote><p><strong>추천 시스템</strong> (recommender system)은 유저의 선호도 (preference)에 맞는 아이템을 제공하는 시스템입니다. 이는 유저-아이템 상호작용 히스토리를 고려해 이루어지는데, 추천 시스템이 유저에게 아이템을 제공하면 유저는 이에 대해 <strong>피드백</strong> (스킵, 클릭, 구매 등)을 제공합니다. 유튜브, 넷플릭스 등 수 많은 어플리케이션에서 이러한 추천 시스템을 도입하고 있습니다.</p><p><img loading="lazy" src="/assets/images/recsys-d473d6e4f27bdd6eda6df5bef2d65719.png" width="668" height="374" class="img_ev3q"></p><p>추천 시스템은 머신 러닝 (machine learning)을 통해 구축할 수 있습니다. 지도학습 (supervised learning)과 같은 기존 방법들은 대체적으로 <strong>유저와 추천 모델 사이의 상호작용을 무시</strong>해 불만족스러운 결과를 내놓습니다. 일반적으로, 추천 시스템은 인터렉티브한 프로세스로 <strong>연속적인 의사 결정 문제</strong> (sequential decision making problem)입니다. 따라서 <strong>강화학습</strong> (reinforcement learning)을 사용하여 최적화할 수 있습니다. 아래 그림은 지도학습과 강화학습 기반 방법 사이의 성능 비교 테이블입니다.</p><p><img loading="lazy" src="/assets/images/recsys-performance-table-a04cf8567c3d7ca13e8da3c6403217af.png" width="1572" height="392" class="img_ev3q"></p><p>이 포스트에서는 강화학습으로 추천 시스템을 구축하는 것에 대한 간단한 소개를 하려고 합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="recommdenr-system-process">Recommdenr System Process<a href="#recommdenr-system-process" class="hash-link" aria-label="Recommdenr System Process에 대한 직접 링크" title="Recommdenr System Process에 대한 직접 링크">​</a></h2><p>추천 시스템은 크게 두 과정으로 나뉩니다.</p><ol><li>candidate generation</li><li>ranking and recommendation</li></ol><p><img loading="lazy" src="/assets/images/recsys-process-3cdbcb35c9416067a3291e9592051b64.png" width="844" height="540" class="img_ev3q"></p><p>candidate generation은 수많은 아이템 중 일부분을 추출하는 과정입니다. 너무 많은 아이템을 모델에 입력하는 것은 비효율적이기 때문에 사전에 걸러내는 작업입니다. 이 때 후보 아이템 set을 <strong>document</strong>라고 부릅니다. ranking and recommendation은 document 아이템 중에서 실제 유저에게 추천할 아이템을 선택하는 과정입니다. 여기에 머신 러닝과 같은 기법이 사용됩니다. document로부터 선택된 아이템 set을 <strong>slate</strong>라고 부릅니다. </p><p><a href="https://github.com/google-research/recsim" target="_blank" rel="noopener noreferrer">Google RecSim</a>은 유저와의 연속적인 상호작용을 지원하는 추천 시스템에 대한 시뮬레이션 environment로, youtube 추천 알고리즘을 위해 개발되었습니다. 아래는 RecSim 아키텍쳐를 나타내는 그림으로 지금까지 설명한 내용을 한번에 보여주고 있습니다.</p><p><img loading="lazy" src="/assets/images/recsim-5dfba8e67865e1ed9962ac6af1123598.png" width="1032" height="686" class="img_ev3q"></p><p>자, 이제 toy 문제를 보고 왜 강화학습이 유용한지 알아봅시다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problem-recommend-items-based-on-sweetness">Problem: Recommend Items based on Sweetness<a href="#problem-recommend-items-based-on-sweetness" class="hash-link" aria-label="Problem: Recommend Items based on Sweetness에 대한 직접 링크" title="Problem: Recommend Items based on Sweetness에 대한 직접 링크">​</a></h2><p>초콜릿과 케일 (채소)이 여러 개 있습니다. 우리는 초콜릿과 케일 중 어떤 것을 추천해야 유저가 만족할까를 고민하고 있습니다. 초콜릿은 단 맛이고, 케일은 쓴 맛이기 때문에 초콜릿과 케일을 달콤함 (sweetness)로 나타낼 수 있습니다. 여기서는 단순함을 위해 달콤함만 고려합시다. 유저들은 대체적으로 쓴 음식보다는 달콤한 음식을 선호할 것입니다. 우리가 생각해볼 수 있는 방법은 달콤한 음식만 추천하는 것입니다. 그러나 달콤한 음식만 추천하다보면 유저들은 점점 만족스러워하지 않을 것입니다. 왜냐하면 자신의 건강 역시 생각하기 떄문이죠. 따라서 유저들은 달콤한 음식보다는 건강에 좋은 달콤하지 않은 음식을 점점 더 선호하게 될 가능성이 있습니다. 그러나 대체적으로 달콤한 음식을 선호하는 유저들이 지속적으로 쓴 음식만 추천 받는다면 역시 불만족스럽겠죠. 이러한 요소들을 종합하면 우리의 가설은 다음과 같습니다: <strong>유저들은 대체적으로 달콤한 음식을 선호하지만, 시간이 지나면서 점점 달콤한 음식의 선호도가 내려가기 때문에 중간 중간 달콥하지 않은 음식도 추천 받길 원한다.</strong></p><p><img loading="lazy" src="/assets/images/user-choice-model-0a4b9ee6900e861beb837f4e049db2ab.png" width="1300" height="686" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reinforcement-learning">Reinforcement Learning<a href="#reinforcement-learning" class="hash-link" aria-label="Reinforcement Learning에 대한 직접 링크" title="Reinforcement Learning에 대한 직접 링크">​</a></h2><p>위 문제를 강화학습으로 학습하기 위해 추천 시스템의 요소들을 잘 정의해야합니다. 추천 시스템의 궁극적인 목적은 유저의 engagement를 maximize하는 것입니다.</p><p>Objective: Maximize user's engagement.</p><p>여기서 engagment란 단어가 다소 모호할 수 있습니다. engagement란 추천된 아이템에 대한 상호작용이나 유저의 행동으로, <strong>유저의 흥미나 관심을 얼마나 효과적으로 끌고 있는지를 나타내는 측정값</strong>입니다. 예를 들면, 추천된 동영상을 시청한 시간 정도 입니다.</p><p>이제 다음을 정의해봅시다:</p><ul><li>Observation: sweetness of 20 items</li><li>Action: recommends 1 item</li><li>Reward: represents the engagement</li></ul><p>observation은 추천 모델이 관찰하는 정보입니다. 여기서는 단순함을 위해 유저 feature는 고려하지 않습니다. 그러나 유저 feature는 실제로 매우 중요합니다. 예를 들어 성별을 고려 시, 상대적으로 여성이 남성보다 달콤한 음식을 선호하므로 이는 추천 시 중요한 feature가 될 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="baselines">Baselines<a href="#baselines" class="hash-link" aria-label="Baselines에 대한 직접 링크" title="Baselines에 대한 직접 링크">​</a></h3><p>먼저, baseline으로 가장 달콤한 아이템만 추천하는 sweetest policy와 랜덤하게 추천하는 random policy를 사용하겠습니다. 아래는 두 베이스라인의 시간에 따른 reward 변화입니다.</p><p><img loading="lazy" src="/assets/images/sweetest-policy-rewards-9fc49136d81b6928377b8cae72f1dd95.png" width="680" height="524" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/random-policy-rewards-11dcf84163ae10b2a5af0be616e7fec3.png" width="680" height="524" class="img_ev3q"></p><ul><li>sweetest policy cumulative reward: 56.93+/-1.44</li><li>random policy cumulative reward: 98.41+/-24.32</li></ul><p>유저들은 대체적으로 달콤한 음식을 선호하지만, 시간이 지나면서 점점 달콤한 음식의 선호도가 내려감을 알 수 있습니다. cumulative reward는 모든 time step동안 획득한 reward의 총합입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rl-performance">RL Performance<a href="#rl-performance" class="hash-link" aria-label="RL Performance에 대한 직접 링크" title="RL Performance에 대한 직접 링크">​</a></h3><p>multi-armed bandit (MAB)는 기존에 추천 시스템에 많이 사용되던 방법입니다. short-term RL은 즉각적인 reward만 고려하는 강화학습 방법으로, MAB와 유사한 속성을 지니고 있습니다. 따라서 short-term RL을 통해 MAB의 문제점을 확인할 수 있습니다.</p><p>반대로 long-term RL은 future reward도 고려해 학습하는 방법입니다. 연속적인 의사 결정 문제에서 future reward에 대한 고려는 매우 중요합니다. 현재 선택한 action이 future reward에 영향을 미치기 때문입니다.</p><p><img loading="lazy" src="/assets/images/rl-performance-454a8682cb3246560c5639444400f599.png" width="760" height="604" class="img_ev3q"></p><ul><li>short-term RL: discount factor = 0</li><li>long-term RL: discount factor = 0.99</li></ul><p>short-term RL은 학습 결과 sweetest policy와 유사해집니다. 이는 너무 당연한게, 유저들은 대체적으로 달콤한 음식을 선호하기 때문에 즉각적인 reward가 높기 때문입니다. long-term RL은 future reward도 고려하기 때문에 결과적으로 cumulative reward가 가장 높습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="References에 대한 직접 링크" title="References에 대한 직접 링크">​</a></h2><p>[1]<!-- --> Anyscale "<a href="https://github.com/anyscale/academy/tree/main/ray-rllib/acm_recsys_tutorial_2022" target="_blank" rel="noopener noreferrer">ACM RecSys 2022 Tutorial</a>"   (Github).<br>
<!-- -->[2]<!-- --> Ie, Eugene, et al. "<a href="https://arxiv.org/abs/1909.04847" target="_blank" rel="noopener noreferrer">Recsim: A configurable simulation platform for recommender systems.</a>  " arXiv preprint arXiv:1909.04847 (2019).<br>
<!-- -->[3]<!-- --> Lin, Yuanguo, et al. "<a href="https://ieeexplore.ieee.org/abstract/document/10144689?casa_token=bzipVczGG2wAAAAA:gkdWb-kk6v_bBlzY7Y3JLzwtsuWBrkw72iJE9Nm-r0uCB9ZDi_FCA-kwxbVTYlQjuOEi1BsW" target="_blank" rel="noopener noreferrer">A survey on reinforcement learning for recommender systems.</a>" IEEE Transactions on Neural Networks and Learning Systems (2023).<br>
<!-- -->[4]<!-- --> Sutton, Richard S., and Andrew G. Barto. Reinforcement learning: An introduction. MIT press, 2018.</p>]]></content>
        <author>
            <name>박진영</name>
            <uri>https://github.com/DevSlem</uri>
        </author>
        <category label="ai" term="ai"/>
        <category label="rl" term="rl"/>
        <category label="recsys" term="recsys"/>
    </entry>
</feed>